<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pyKVFinder Results</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', 'Helvetica', 'Arial', sans-serif;
    }
    .btn-primary {
      background: linear-gradient(to bottom, #2C7A7B, #2A6A6B);
      transition: background-color 0.2s ease, transform 0.1s ease;
    }
    .btn-primary:hover {
      background: #234E52;
      transform: translateY(-1px);
    }
    .btn-secondary {
      background: linear-gradient(to bottom, #5A67D8, #4C51BF);
      transition: background-color 0.2s ease, transform 0.1s ease;
    }
    .btn-secondary:hover {
      background: #434190;
      transform: translateY(-1px);
    }
    .card-shadow {
      box 0 4px 12px rgba(0, 0, 0, 0.05);
    }
    a {
      transition: color 0.2s ease;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col bg-gray-50 text-gray-800">
  <main class="flex-grow p-6 md:p-8">
    <div class="max-w-4xl mx-auto bg-white rounded-2xl p-6 md:p-8 space-y-8 card-shadow">
      <h1 class="text-3xl md:text-4xl font-bold text-center text-gray-800">pyKVFinder Webapp</h1>
      <h4 class="text-lg text-center text-gray-600">Units are in Angstroms</h4>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Generated Files -->
        <div class="bg-gray-50 rounded-xl p-5 border border-gray-200">
          <h3 class="text-lg font-semibold text-gray-800 mb-3">Generated Files</h3>
          <ul class="space-y-2 text-sm">
            <li class="flex items-center">
              <svg class="w-4 h-4 mr-2 text-indigo-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6z" clip-rule="evenodd"/></svg>
              <a href="{{ url_for('download_file', filename=results.results_toml.split('/')[-1]) }}"
                 class="text-indigo-600 hover:text-indigo-800 underline">Results TOML</a>
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 mr-2 text-indigo-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6z" clip-rule="evenodd"/></svg>
              <a href="{{ url_for('download_file', filename=results.output_pdb.split('/')[-1]) }}"
                 class="text-indigo-600 hover:text-indigo-800 underline">Output PDB</a>
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 mr-2 text-indigo-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6z" clip-rule="evenodd"/></svg>
              <a href="{{ url_for('download_file', filename=results.histograms_pdf.split('/')[-1]) }}"
                 class="text-indigo-600 hover:text-indigo-800 underline">Histograms PDF</a>
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 mr-2 text-indigo-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6z" clip-rule="evenodd"/></svg>
              <a href="{{ url_for('download_file', filename=results.excel_file.split('/')[-1]) }}"
                 class="text-indigo-600 hover:text-indigo-800 underline">Pocket Results Excel</a>
            </li>
          </ul>
        </div>

        <!-- Download Instructions -->
        <div class="bg-gray-50 rounded-xl p-5 border border-gray-200">
          <h3 class="text-lg font-semibold text-gray-800 mb-3">Download Instructions</h3>
          <p class="text-sm text-gray-700 mb-3">Click on the links to download your pyKVFinder analysis files:</p>
          <ul class="text-sm space-y-1 text-gray-600">
            <li><strong>Results TOML:</strong> Detailed analysis results</li>
            <li><strong>Output PDB:</strong> Processed PDB file</li>
            <li><strong>Histograms PDF:</strong> Visualization of cavity characteristics</li>
            <li><strong>Pocket Results Excel:</strong> Tabulated cavity data</li>
          </ul>
        </div>
      </div>

      <div class="text-center">
        <a href="/" class="inline-block btn-secondary text-white px-6 py-3 rounded-lg text-lg font-semibold">
          Back to Upload
        </a>
      </div>
    </div>
  </main>

  <!-- Fixed Footer - Matches Boltz Style -->
  <footer class="flex-shrink-0 w-full text-center text-sm text-gray-600 bg-gray-100 border-t border-gray-200 py-3">
    <div class="max-w-4xl mx-auto px-4">
      <p class="mb-1">
        If you use data or visualizations generated with this tool for publications, posters, or presentations,
        please cite the following publications and acknowledge Dr. Peter Stockinger for providing access to this web app.
      </p>
      <p class="mb-0.5 text-sm">
        da Silva Guerra et al. (2021). <em>pyKVFinder: an efficient and integrable Python package for biomolecular cavity detection and characterization in data science</em>.
        <a href="https://bmcbioinformatics.biomedcentral.com/articles/10.1186/s12859-021-04519-4" target="_blank" class="text-indigo-500 hover:text-indigo-600 underline">BMC Bioinformatics</a>.
      </p>
      <div class="flex justify-center items-center space-x-2 text-gray-500 mt-2">
        <span>Â© Dr. Peter Stockinger</span>
        <a href="https://www.linkedin.com/in/peter-stockinger/" target="_blank" rel="noopener noreferrer" class="hover:text-indigo-600">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-4 h-4 inline-block" viewBox="0 0 24 24">
            <path d="M20.447 20.452h-3.554v-5.569c0-1.327-.025-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.94v5.666H9.351V9h3.414v1.561h.049c.476-.9 1.637-1.852 3.369-1.852 3.6 0 4.266 2.37 4.266 5.451v6.292zM5.337 7.433c-1.144 0-2.07-.928-2.07-2.07 0-1.145.926-2.07 2.07-2.07s2.07.925 2.07 2.07c0 1.142-.926 2.07-2.07 2.07zM6.814 
